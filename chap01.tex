%% Copyright (c) 2002, 2010 Sam Williams
%% Copyright (c) 2010 Richard M. Stallman
%% Permission is granted to copy, distribute and/or modify this
%% document under the terms of the GNU Free Documentation License,
%% Version 1.3 or any later version published by the Free Software
%% Foundation; with no Invariant Sections, no Front-Cover Texts, and
%% no Back-Cover Texts. A copy of the license is included in the
%% file called ``gfdl.tex''.

\chapter{Роковой принтер}

\begin{quotation}
  \begin{flushright}
    Бойтесь данайцев, дары приносящих.\\
    -- Вергилий, \textit{\enquote{Энеида}}
  \end{flushright}
\end{quotation}

Опять новый принтер зажевал бумагу.

Часом ранее Ричард Столлман, программист Лаборатории Искусственного Интеллекта МТИ (Лаборатории ИИ), отправил 50-страничный документ печататься на офисном принтере, и погрузился в работу. А сейчас Ричард оторвался от дела, подошёл к принтеру и увидел пренеприятнейшее зрелище: вместо долгожданных 50 отпечатанных страниц в лотке лежали только 4 готовых листа. Да и те явно относились к какому-то чужому документу. Видимо, принтер получил на печать из офисной сети файлы от Ричарда и кого-то ещё, честно отработал на нескольких листах, а потом решил перекусить бумагой.

Ждать, пока машина выполнит возложенную на неё работу -- обычное дело для программиста, и Столлману впору было отнестись к этой проблеме стоически. Но одно дело, когда вы даёте машине задачу и занимаетесь своими делами, и совсем другое — когда вам приходится стоять рядом с машиной и контролировать её. Далеко не в первый раз Ричарду приходилось стоять перед принтером и следить за тем, чтобы отпечатались все страницы от начала до конца. Как всякий хороший технарь, Столлман очень высоко ценил эффективность работы устройств и программ. Неудивительно, что этот очередной срыв рабочего процесса возбудил у Ричарда горячее желание залезть во внутренности принтера и навести там должный порядок.

Но увы -- Столлман был программистом, а не инженером-механиком. Поэтому оставалось лишь следить за вылезающими страницами и раздумывать о других путях решения проблемы зажёвывания бумаги.

А ведь этот принтер сотрудники Лаборатории ИИ встречали с восторгом и воодушевлением! Его подарила компания Xerox, это была её прорывная разработка -- модификация быстрого светокопира. Принтер не только делал копии, но и превращал виртуальные данные из файлов офисной сети в превосходно выглядящие документы. В этом аппарате чувствовался дерзкий инновационных дух знаменитой лаборатории Xerox в Пало-Альто, он был предвестником революции в настольной печати, что полностью перевернула всю индустрию к исходу десятилетия.

Сгорая от нетерпения, программисты Лаборатории тут же включили новый принтер в сложнейшую офисную сеть. Результаты превзошли самые смелые ожидания. Страницы вылетали со скоростью 1 штука в секунду, документы стали печататься в 10 раз быстрее. Кроме того, машина была предельно педантична в своей работе: круги выглядели кругами, а не овалами, а прямые линии перестали напоминать низкоамплитудные синусоиды.

Во всех смыслах, подарок Xerox был предложением, от которого невозможно отказаться.

Однако со временем восторги пошли на убыль. Как только принтер стали нагружать по максимуму, обнаружились проблемы. Сильнее всего раздражало то, что аппарат чересчур охотно зажёвывал бумагу. Инженерное мышление программистов быстро выявило корень проблемы. Дело в том, что светокопиры традиционно требуют постоянного присутствия человека рядом. В том числе и для того, чтобы поправлять бумагу в случае надобности. И когда Xerox взялся за превращение светокопира в принтер, инженеры компании не обратили внимания на этот момент и сосредоточились на решении других, более насущных для принтера проблем. Говоря инженерным языком, у нового принтера Xerox постоянное участие человека оказалось изначально встроено в механизм.

Превращая светокопир в принтер, инженеры Xerox внесли в него одно изменение, которое породило далеко идущие последствия. Вместо того, чтобы подчинить аппарат одному-единственному оператору, его подчинили всем пользователям офисной сети. Пользователь теперь не стоял рядом с машиной, контролируя её работу, теперь он через запутанную офисную сеть высылал задание на печать, надеясь, что документ будет напечатан так, как требуется. Потом пользователь шёл к принтеру, чтобы забрать готовый цельный документ, но вместо него обнаруживал выборочно напечатанные листы.

Вряд ли Столлман был единственным в Лаборатории ИИ, кто заметил проблему, но он ещё и размышлял над её решением. За несколько лет до этого Ричарду довелось решить похожую проблему с прежним принтером. Для этого он на персональном рабочем компьютере PDP-11 отредактировал программу, которая работала на мейнфрейме PDP-10 и управляла принтером. Саму проблему зажёвывания бумаги Столлману решить не удалось, вместо этого он вставил код, который заставлял PDP-11 время от времени проверять состояние принтера. Если аппарат зажёвывал бумагу, программа просто рассылала на рабочие PDP-11 оповещение вроде \enquote{принтер жуёт бумагу, требуется починка}. Решение оказалось эффективным -- оповещение шло напрямую пользователям, которые активно пользовались принтером, так что его выходки с бумагой зачастую пресекались немедленно.

Конечно, это было решение ad-hoc -- то, что программисты называют \enquote{костылём}, но костыль получился довольно изящный. Он не исправлял проблему в механизме принтера, но делал лучшее из того, что можно было сделать -- налаживал информативную обратную связь пользователя и машины. Несколько дополнительных строчек кода экономили работникам Лаборатории ИИ по 10-15 минут рабочего времени еженедельно, избавив их от необходимости постоянно бегать проверять принтер. С точки зрения программиста, решение Столлмана держалось на коллективном разуме Лаборатории.

Вспоминая ту историю, Ричард говорил: \enquote{Получив такое сообщение, вы не должны были уповать на то, что принтер исправит кто-то ещё. Вам нужно было просто встать и пойти к принтеру. Спустя минуту или две после того, как принтер начинал жевать бумагу, к нему приходили двое-трое сотрудников. Хоть кто-то из них точно знал, что нужно делать}.

Подобные ловкие решения были визитной карточкой Лаборатории ИИ и её программистов. Вообще, лучшие программисты Лаборатории несколько презрительно относились к термину \enquote{программист}, предпочитая ему сленговое \enquote{хакер}. Это определение точнее отражало суть работы, которая включала самые разные занятия, от изощрённых интеллектуальных забав до кропотливых улучшений программ и компьютеров. Также в нём чувствовалось старомодное убеждение об американской изобретательности. Хакеру недостаточно просто написать работающую программу. Хакер пытается проявить мощь своего интеллекта перед собой и другими хакерами, возложив на себя куда более сложные и тяжёлые задачи -- например, сделать программу одновременно максимально быстрой, компактной, мощной и красивой.\endnote{Для более точного понимания термина \enquote{хакер} посмотрите \nameref{Appendix A}.}

Компании вроде Xerox намеренно дарили свою продукцию крупным сообществам хакеров. Это был расчёт на то, что хакеры начнут ею пользоваться, привяжутся к ней, и потом придут работать в компанию. В 60-е годы и на заре 70-х хакеры часто писали настолько качественные и полезные программы, что производители охотно распространяли их среди своих клиентов.

Таким образом, столкнувшись с жующим бумагу новым принтером Xerox, Столлман сразу подумал провернуть с ним свой старый трюк -- \enquote{хакнуть} программу управления аппаратом. Однако его поджидало неприятное открытие -- к принтеру не прилагалось никакой программы, по крайней мере, в такой форме, чтобы Столлман или другой программист мог её прочитать и отредактировать. До этого момента большинство компаний считали хорошим тоном давать файлы с исходным кодом -- понятным для человека текстом, который давал полную информацию о программных командах и соответствующих функциях машины. Но Xerox в этот раз предоставил программу только в скомпилированном, бинарном виде. Если программист попытался бы прочитать эти файлы, он увидел бы только нескончаемые потоки нулей и единиц, понятные машине, но не человеку.

Есть программы, которые называются \enquote{дизассемблеры}, они переводят единицы и нули в низкоуровневые машинные инструкции, но разобраться, что эти инструкции делают -- очень долгий и трудный процесс, называемый \enquote{обратной разработкой}. На обратную разработку программы принтера легко могло уйти куда больше времени, чем на суммарное исправление зажёванной бумаги в течение ближайших 5 лет. Ричард был недостаточно отчаянным, чтобы решиться на такой шаг, и потому он просто отложил проблему в долгий ящик.

Недружелюбная политика Xerox резко противоречила обычной практике хакерских сообществ. Например, чтобы разработать для персонального компьютера PDP-11 программы для управления старым принтером и терминалами, Лаборатории ИИ нужен был кросс-ассемблер, который собирал бы программы для PDP-11 на мейнфрейме PDP-10. Хакеры Лаборатории могли написать кросс-ассемблер сами, но Столлман, будучи студентом Гарварда, нашёл похожую программу в компьютерной лаборатории университета. Она была написана для такого же мейнфрейма, PDP-10, но под другую операционную систему. Ричард понятия не имел, кто написал эту программу, поскольку в исходном коде об этом ничего не говорилось. Он просто принёс в Лабораторию копию исходного кода, отредактировал её, и запустил на PDP-10. Без лишних хлопот и забот Лаборатория получила программу, которая была необходима для работы офисной инфраструктуры. Столлман даже сделал программу мощнее, добавив в неё несколько функций, которых не было в оригинале. \enquote{Мы вовсю использовали эту программу несколько лет}, -- не без гордости сообщает он.

В глазах программиста 70-х годов такая модель распространения программного кода ничем не отличалась от добрососедских отношений, когда один делится с другим чашкой сахара или даёт на время дрель. Но если вы, когда одалживаете дрель, лишаете хозяина возможности ею пользоваться, то в случае с копированием программ ничего подобного не происходит. Ни автор программы, ни её другие пользователи ничего не лишаются от копирования. Зато другие люди от этого приобретают, как в случае с хакерами Лаборатории, что получили программу с новыми функциями, которых раньше даже не было на свете. И эти новые функции можно так же сколько угодно копировать и распространять среди других людей. Столлман вспоминает об одном программисте из частной компании Bolt, Beranek \& Newman, который тоже получил программу и отредактировал её для запуска под Twenex -- ещё одной операционной системы для PDP-10. Также он добавил в программу ряд замечательных функций, и Столлман скопировал их в свою версию программы в Лаборатории. После этого они решили сообща развивать программу, которая уже ненароком выросла в мощный продукт, работающий на разных операционных системах.

Вспоминая программную инфраструктуру Лаборатории ИИ, Столлман говорит: \enquote{Программы развивались подобно городу. Какие-то части менялись понемногу, какие-то -- сразу и полностью. Появлялись новые участки. И вы всегда могли взглянуть на код и сказать, мол, судя по стилю, эту часть написали в начале 60-х, а эту -- в середине 70-х\hspace{0.01in}}.

Благодаря такой простой умственной кооперации, хакеры создали множество мощных и надёжных систем в Лаборатории и вне её. Не каждый программист, разделяющий эту культуру, назвал бы себя хакером, но большинство из них вполне разделяли настрой Ричарда Столлмана. Если программа или исправленный код хорошо решают вашу проблему, они так же хорошо решат эту проблему для кого угодно. Почему бы тогда не поделиться этим решением, хотя бы из моральных соображений?

Эту концепцию безвозмездного сотрудничества подорвало сочетание жадности и коммерческой тайны, породив причудливое сочетание секретности и кооперации. Хороший пример -- начальный период жизни BSD. Это мощная операционная система, которую создали учёные и инженеры Калифорнийского Университета в Беркли на основе Unix, купленного в AT\&T. Стоимость копирования BSD была равна стоимости плёнки, но с одним условием -- плёнку с копией BSD школы могли получить только имея лицензию AT\&T, которая стоила \$50,000. Получалось, что хакеры Беркли делились программами только в той мере, в какой им позволяла это делать компания AT\&T. И они не видели в этом ничего странного.

Столлман тоже не сердился на Xerox, хотя и был разочарован. Он никогда не думал о том, чтобы попросить у компании копию исходного кода. \enquote{Они и так подарили нам лазерный принтер, -- говорил он, -- я не мог сказать, что они нам ещё что-то должны. К тому же, исходники отсутствовали явно неслучайно, это было внутреннее решение компании, и просить изменить его было бесполезно}.

В конце концов, пришла хорошая новость: оказалось, что копия исходника программы для принтера Xerox есть у научного сотрудника Университета Карнеги-Меллон.

Общение с Карнеги-Меллон не сулило ничего хорошего. В 1979 году докторант Брайан Рид шокировал сообщество отказом поделиться своей программой для форматирования текста, прообразом Scribe. Она была первой программой такого типа, в которой использовались семантические команды вроде \enquote{выдели это слово} или \enquote{этот параграф -- цитата} вместо низкоуровневых \enquote{напиши это слово курсивом} или \enquote{увеличь отступы для этого параграфа}. Рид продал Scribe расположенной в Питтсбурге компании Unilogic. По словам Рида, в конце докторантуры он просто искал команду разработчиков, на плечи которых можно было бы перевалить заботу о том, чтобы исходники программы не попали в общее пользование (до сих пор неясно, почему Рид считал это недопустимым). Чтобы подсластить пилюлю, Рид согласился добавить в код набор привязанных ко времени функций, так называемых \enquote{тайм-бомб} -- они превращали бесплатную копию программу в нерабочую по истечении 90-дневного пробного периода. Чтобы заставить программу снова работать, пользователям нужно было заплатить компании и получить \enquote{отключалку} тайм-бомбы.

Для Столлмана это было чистейшим и откровенным предательством программистской этики. Вместо того, чтобы следовать принципу \enquote{делись и раздавай}, Рид встал на путь взимания платы с программистов за доступ к информации. Но он не особенно задумывался об этом, потому что нечасто использовал Scribe.

Unilogic дали Лаборатории ИИ бесплатную копию Scribe, но не удалили тайм-бомбу и даже не упомянули о ней. До поры до времени программа работала, но однажды всё-таки перестала. Системный хакер Говард Кэннон провёл многие часы за отладкой бинарного файла программы, пока, наконец, не обнаружил тайм-бомбу и не удалил её. Его по-настоящему взбесила эта история, и он не постеснялся рассказать о ней другим хакерам, и передать все свои мысли и эмоции насчёт преднамеренной \enquote{ошибки} Unilogic.

По причинам, связанным с работой в Лаборатории, Столлман отправился в кампус Карнеги-Меллон спустя пару месяцев. Он постарался найти человека, у которого, согласно услышанной новости, были исходники программы для принтера. К счастью, этот человек был у себя в кабинете.

Разговор получился откровенным и резким, в типичном для инженеров стиле. Представившись, Столлман попросил копию исходного кода программы для управления лазерным принтером Xerox. К его великому изумлению и огорчению, научный сотрудник отказал.

\enquote{Он сказал, что пообещал производителю не давать мне копию}, -- говорит Ричард.

Память -- забавная штука. Спустя 20 лет после этого инцидента память Столлмана полна белых пятен. Он забыл не только о причине, по которой приехал в Карнеги-Меллон, но и о том, кто был его визави в этом неприятном разговоре. По словам Рида, этим человеком, скорее всего, был Роберт Спролл, бывший сотрудник научно-исследовательского центра Xerox в Пало-Альто, который впоследствии стал директором исследовательского отделения Sun Microsystems. В 70-х годах Спролл был ведущим разработчиком программ для лазерных принтеров Xerox. Где-то в 1980 году Спролл получил должность научного сотрудника в Карнеги-Меллон, где продолжал работать в том числе и над лазерными принтерами.

Но когда Спроллу задают вопросы об этом разговоре, он лишь разводит руками. Вот что отвечает он по электронной почте: \enquote{Не могу сказать ничего определённого, я совершенно ничего не помню об этом случае}.

\enquote{Код, который Столлман хотел получить, был новаторской разработкой, настоящим воплощением искусства. Спролл написал его за год до того, как пришёл в Карнеги-Меллон, или около того}, -- рассказывает Рид. Если это действительно так, то налицо недоразумение: Столлману нужна была программа, которую МТИ использовал уже долгое время, а не какая-та новая её версия. Но в том кратком разговоре ни слова не говорилось о каких-либо версиях.

Общаясь с аудиторией, Столлман регулярно вспоминает инцидент в Карнеги-Меллон и акцентирует внимание на том, что нежелание того человека делиться исходниками -- всего лишь следствие соглашения о неразглашении, которое было предусмотрено контрактом между ним и компанией Xerox. Сейчас для компаний в порядке вещей требование соблюдать секретность в обмен на доступ к новейшим разработками, но в ту пору NDA было чем-то новым. Оно отражало важность для Xerox как самих лазерных принтеров, так и той информации, что была нужна для их работы. \enquote{Xerox пытался превратить лазерные принтеры в коммерческий продукт, -- вспоминает Рид, -- для них безумием было бы раздавать исходный код всем подряд}.

Столлман же воспринимал NDA совершенно иначе. Для него это был отказ Карнеги-Меллон участвовать в творческой жизни общества, наперекор доселе поощряемому взгляду на программы, как на общественные ресурсы. Как если бы крестьянин внезапно обнаружил, что многовековые ирригационные каналы пересохли, и в попытке найти причину проблемы он бы дошёл до сверкающей новизной гидроэлектростанции с логотипом Xerox.

Столлману потребовалось время, чтобы понять истинную причину отказа -- новый, преисполненный секретности формат взаимодействия программиста и компании. Поначалу же он видел только личный отказ. \enquote{Меня это так разозлило, что я даже не нашёлся что сказать. Я просто развернулся и молча вышел, -- вспоминает Ричард, -- может, я даже хлопнул дверью, не знаю. Я помню только жгучее желание поскорее убраться оттуда. Ведь я шёл к ним, ожидая сотрудничества, и даже не думал, что буду делать, если мне откажут. И когда это произошло, я буквально потерял дар речи -- настолько это ошеломило и расстроило меня}.

Даже через 20 лет спустя он всё ещё чувствует отголосок того гнева и разочарования. Инцидент в Карнеги-Меллон стал поворотным пунктом в жизни Ричарда, столкнув его лицом к лицу с новой этической проблемой. В следующие месяцы вокруг Столлмана и прочих хакеров Лаборатории ИИ произойдёт масса событий, по сравнению с которыми те 30 секунд гнева и разочарования в Карнеги-Меллон покажутся сущими пустяками. Тем не менее, Столлман уделяет особое внимание этому инциденту. Он был первым и наиболее важным пунктом в той череде событий, что превратили Ричарда из одинокого хакера, интуитивного противника централизованной власти, в радикального евангелиста свободы, равенства и братства в программировании.

\enquote{Это было моё первое столкновение с соглашением о неразглашении, и я скоро понял, что люди становятся жертвами таких соглашений, -- уверенно говорит Столлман, --  Такими жертвами стали я и мои коллеги из Лаборатории}.

Позже Ричард пояснил: \enquote{Если бы он отказал мне по личным мотивам, это трудно было бы назвать проблемой. Я бы мог в ответ посчитать его придурком, и на этом всё. Но его отказ был безличным, он дал мне понять, что не будет сотрудничать не только со мной, но и вообще с кем бы то ни было. И это не только создавало проблему, но и делало её по-настоящему огромной}.

Хотя и в предыдущие годы случались проблемы, которые сердили Столлмана, по его словам, только после инцидента в Карнеги-Меллон он осознал, что культура программирования, которую он считал священной, начинает меняться. \enquote{Я уже был убеждён, что программы должны быть общедоступными для всех, но не мог это отчётливо сформулировать. Мои мысли на этот счёт были слишком смутными и хаотичными для того, чтобы выразить их всему миру. После инцидента я начал понимать, что проблема уже существует, и что её нужно решать прямо сейчас}.

Будучи высококлассным программистом в одном из сильнейших институтов мира, Ричард не обращал особого внимания на соглашения и сделки других программистов -- только бы они не мешали его основной работе. Пока в Лабораторию не прибыл лазерный принтер Xerox, Столлман имел все возможности смотреть свысока на машины и программы, от которых страдали другие пользователи. Ведь он мог изменить эти программы как считал нужным.

Но появление нового принтера поставило под угрозу эту свободу. Аппарат работал хорошо, даром что периодически жевал бумагу, но не было никакой возможности изменить его поведение под нужды коллектива. С точки зрения индустрии программного обеспечения, закрытие программы принтера было необходимым шагом в бизнесе. Программы стали таким ценным активом, что компании больше не могли себе позволить публиковать исходные коды, особенно когда в программах воплощались некие прорывные технологии. Ведь тогда конкуренты могли бы практически бесплатно скопировать эти технологии для своих продуктов. Но с точки зрения Столлмана, принтер был Троянским Конём. После десятка лет неудачных попыток распространения \enquote{проприетарных} программ, для которых запрещена свободная раздача и модификация кода, именно такая программа внедрилась в обитель хакеров самым коварным способом -- под личиной подарка.

То, что Xerox давал некоторым программистам доступ к коду в обмен на соблюдение секретности, раздражало не меньше, но Столлман с болью признавал, что в более молодом возрасте, скорее всего, согласился бы на предложение Xerox. Инцидент в Карнеги-Меллон укрепил его моральную позицию, не только зарядив его подозрительностью и гневом в отношении подобных предложений в будущем, но и поставив перед ним вопрос: что, если однажды заявится хакер с аналогичной просьбой, и теперь уже ему, Ричарду придётся отказывать в копировании исходников, следуя требованиям работодателя?

\enquote{Когда мне предлагают аналогичным образом предать своих коллег по цеху, я вспоминаю свой гнев и разочарование, когда так же поступили со мной и другими сотрудниками Лаборатории, -- говорит Столлман, -- так что большое спасибо, ваша программа замечательна, но я не могу согласиться на условия её использования, так что обойдусь без неё'\hspace{0.01in}}.

Память об этом уроке Ричард твёрдо сохранит и в беспокойные 80-е, когда многие из его коллег по Лаборатории уйдут работать в другие компании, связав себя соглашениями о неразглашении. Наверное они говорили себе, что это неизбежное зло на пути к работе над самыми интересными и заманчивыми проектами. Однако для Столлмана само существование NDA ставит под сомнение моральную ценность проекта. Что может быть хорошего в проекте, пусть даже технически увлекательном, если он не служит общим целям?

Очень скоро Столлман понял, что несогласие с подобными предложениями имеет ощутимо большую цену, чем личные профессиональные интересы. Такая бескомпромиссная позиция отделяет его от других хакеров, которые хоть и питают отвращение к секретности, но готовы идти на моральные компромиссы. Мнение Ричарда же однозначно: отказ делиться исходным кодом это предательство не только научно-исследовательской роли программирования, но и Золотого Правила морали, которое гласит, что ваше отношение к другим должно быть таким же, каким вы хотите видеть отношение к себе.

Вот в чём важность истории с лазерным принтером и инцидента в Карнеги-Меллон. Без всего этого, как признаёт Столлман, его судьба пошла бы по совсем другому пути, балансируя между материальным достатком коммерческого программиста и окончательным разочарованием в жизни, проведённой за написанием никому не видимого программного кода. Не было бы никакого смысла размышлять об этой проблеме, в которой остальные даже не видели проблему. И самое главное, не было бы той живительной порции гнева, что придала Ричарду энергию и уверенность для движения вперёд.

\enquote{В тот день я решил, что никогда и ни за что не соглашусь участвовать в этом}, -- говорит Столлман, имея в виду NDA и вообще всю культуру, которая способствует обмену личной свободы на какие-то блага и преимущества.

\enquote{Я решил, что никогда не сделаю ни одного человека жертвой, которой стал однажды сам}.

\theendnotes
\setcounter{endnote}{0}
